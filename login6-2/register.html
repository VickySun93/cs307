<!DOCTYPE HTML>
<html lang="en-US">
<head>
<title>Sign up for PUconnection</title>
<meta charset="UTF-8">
<meta name="keywords" content="registration page">
<meta name="description" content="create an account">
<link type="text/css" href="themes/css/v3/reset.css" rel="stylesheet">
<link type="text/css" href="themes/css/v3/public.css" rel="stylesheet">
<link type="text/css" href="themes/css/v3/register.css" rel="stylesheet">
<link rel="shortcut icon" href="favicon.ico" />
<script src="themes/js/jquery.min.js" type="text/javascript"></script>
<script src="themes/js/jquery.form.js" type="text/javascript"></script>
<script src="themes/js/json.parse.js" type="text/javascript"></script>
<script type="text/javascript">
$(function(){
	$(".btn").click(function(){
				var agreenMent=$("#agreement").attr("data");
				
				//alert(agreenMent);0
				var userName= $("#username").val();
				var userPass= $("#password1").val();
				var userPass2=$("#password2").val();
				var userEmail=$("#mail").val();
				//var vercode =$("#varcode").val();
				
				userPass=$.trim(userPass);
				userPass2=$.trim(userPass2);
				
				$(".input_div1 span,.input_div2 span,.input_div3 span,.input_div4 span").html("");
				//$(".btn").val('Registering...').attr('disabled','disabled');
				
				if(!isRegisterUserName(userName)){
					$(".input_div1 span").html('<img src="themes/images/v3/text_error.png"><font color=red>Invalid username!</font>');
					$("#username").focus();
					$(".btn").val('Register').removeAttr('disabled');
					return false;
				}else if(!isEmail(userEmail)){
					$(".input_div2 span").html('<img src="themes/images/v3/text_error.png"><font color=red>Invalid email address!</font>');
					$("#mail").focus();
					$(".btn").val('Register').removeAttr('disabled');
					return false;
				}else if(userPass.length <8){
					$(".input_div3 span").html('<img src="themes/images/v3/text_error.png"><font color=red>Invalid password!</font>');
					$("#password1").focus();
					$(".btn").val('Register').removeAttr('disabled');
					return false;
				}else if(userPass != userPass2){
					$(".input_div4 span").html('<img src="themes/images/v3/text_error.png"><font color=red>Different password!</font>');
					$("#password2").focus();
					$(".btn").val('Register').removeAttr('disabled');
					return false;
				}else{
					$("#registerForm").ajaxSubmit(function(e){
						var obj=json_parse(e);
						var code=obj.code;
						var info = '<img src="themes/images/v3/text_error.png"><font color=red>'+obj.info+"</font>";
						if(code=='-1' || code=='-5'){
							$(".input_div1 span").html(info);
							$("#username").focus();
						}else if(code =='-2' || code == '-4'){
							$(".input_div2 span").html(info);
							$("#password1").focus();
						}else if(code =='-3' || code == '-7'){
							$(".input_div2 span").html(info);
							$("#mail").focus();
						}
						else if(code == '-99'){
							$(".input_div3 span").html(info);							
							$("#mail").focus();
						}else if(code == '1'){
							alert('恭喜您，注册成功!');
							window.location.href='index.html';
							window.location.href=obj.acturl;
						}
						//flushCode();
						$(".change").click();
						$(".btn").val('Register').removeAttr('disabled');
					})
				}
				
		})
	
});

function isRegisterUserName(s){  
	var patrn=/^[a-zA-Z0-9]{1}([a-zA-Z0-9]|[._]){5,19}$/;  
	if (!patrn.exec(s)) return false
	return true
}

function isEmail(email){
	   var myreg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
	   if(!myreg.test(email)) return false;
		return true; 
 }

</script>
<style>
.input_div span{ background:#FFF;}
</style>
<!--[if IE 6]>
<script src="themes/js/DD_belatedPNG.js"  type="text/javascript"></script>
<script>DD_belatedPNG.fix('.png_bg');</script>
<![endif]-->
</head>
<body>
	<div id="header">
		<div class="header">
			<h1 class="png_bg">PUconnection</h1>
		
			<a class="png_bg" href="">Homepage</a>
		</div>
	</div>
	
	<div class="register_content">
	
		<ul class="step_ul step1 clear">
			<li class="li1">Step 1. Sign up</li>
			<li class="li2">Step 2. Complete registration</li>
		</ul>
		
		 <form name="registerForm" id='registerForm' action="index.html" method="post" style="padding:60px 40px 88px 40px;font-family:Microsoft Yahei">
			<div class="div_form clear ">
				<label>Username:</label>
				<div class="input_div input_div1">
					<input id="username" name="username" type="text" placeholder="Between 6 and 24 characters and digits" maxlength="24">
					<span></span>
				</div>
			</div>
			<div class="div_form clear ">
				<label>Email address:</label>
				<div class="input_div input_div2" >
					<input id="mail" name="useremail"  type="text" placeholder="Please enter a valid email address" maxlength="64">
					<span></span>
				</div>
			</div>
			<div class="div_form clear ">
				<label>Password:</label>
				<div class="input_div input_div3">
					<input id="password1" name="userpass" type="password" placeholder="At least 8 characters, case sensitive" maxlength="32">
					<span></span>
				</div>
			</div>
			<div class="div_form clear ">
				<label>Re-enter password:</label>
				<div class="input_div input_div4">
					<input id="password2" name="userpass2" type="password" placeholder="Please re-enter password" maxlength="32">
					<span></span>
				</div>
			</div>
            
			<div class="div_form clear ">
				<label></label>
				<div class="input_div">
					<button type="submit">Submit</button>
				</div>
			</div>
			
		</form>
		
		<div class="reg_login">
			<p>Have account already？</p>
			<a class="btn2" href="index.html">Log in!</a>
		</div>
		<div class="bg"></div>
	</div>
</body>
</html>
















